server.port=8080
spring.application.name=api-gateway

# Eureka client config
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.instance.prefer-ip-address=true

# Enable discovery locator (so routes use lb://SERVICE-NAME)
spring.cloud.gateway.discovery.locator.enabled=true

# Explicit routes
spring.cloud.gateway.routes[0].id=admin
spring.cloud.gateway.routes[0].uri=lb://ADMIN-SERVICE
spring.cloud.gateway.routes[0].predicates[0]=Path=/auth/*, /admin/*, /secure/*

spring.cloud.gateway.routes[1].id=catalogue
spring.cloud.gateway.routes[1].uri=lb://CATALOGUE-SERVICE
spring.cloud.gateway.routes[1].predicates[0]=Path=/catalogues/*, /catalogue-secure/*

spring.cloud.gateway.routes[2].id=member
spring.cloud.gateway.routes[2].uri=lb://MEMBER-SERVICE
spring.cloud.gateway.routes[2].predicates[0]=Path=/members/*, /member-secure/*

spring.cloud.gateway.routes[3].id=circulation
spring.cloud.gateway.routes[3].uri=lb://CIRCULATION-SERVICE
spring.cloud.gateway.routes[3].predicates[0]=Path=/circulations/*, /circulation-secure/*

spring.cloud.gateway.routes[4].id=acquisition
spring.cloud.gateway.routes[4].uri=lb://ACQUISITION-SERVICE
spring.cloud.gateway.routes[4].predicates[0]=Path=/acquisitions/*, /acquisition-secure/*

spring.cloud.gateway.routes[5].id=review
spring.cloud.gateway.routes[5].uri=lb://REVIEW-SERVICE
spring.cloud.gateway.routes[5].predicates[0]=Path=/reviews/*, /review-secure/*

# Global CORS Configuration for Spring Cloud Gateway
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedOrigins=http://localhost:5173
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedMethods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.corsConfigurations.[/*].allowedHeaders=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowCredentials=true